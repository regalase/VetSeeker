@model ISPROJ2VetSeeker.Models.CompleteScheduleModel


@{ ViewBag.Title = "CompleteSchedule";
    Layout = "~/Views/Shared/_LayoutVet.cshtml"; }
@Styles.Render("~/Content/StyleSheetPetRegister.css")
@Styles.Render("~/Content/Table.css")
<link href="~/Content/StyleSheetPetRegister.css" rel="stylesheet" type="text/css" />
<link href="~/Content/Table.css" rel="stylesheet" type="text/css" />
<style>

    th, td {
        text-align: center !important;
    }

    textarea {
        height: 250px;
        width: 100%;
        border: 1px solid #dedede;
        border-radius: 10px;
        background-color: #dedede;
        padding: 5px;
    }
</style>
<script>

    function AddProfessionalFee(value) {
        var currentTotalValue = document.getElementById("service-total").text;
        var totalValue = +value + +currentTotalValue;
        document.getElementById("total-price-id").text = totalValue;
        document.getElementById("total-price-id").value = totalValue.toLocaleString(undefined, { style: 'decimal', minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    function AddServiceFee(checkbox) {
        if (checkbox.checked == true) {
            var professionalFee = document.getElementById("professional-fee-id").value;
            var currentTotal = document.getElementById("total-price-id").value;
            var newValue = +checkbox.value + +currentTotal;
            document.getElementById("total-price-id").text = newValue;
            document.getElementById("total-price-id").value = newValue.toLocaleString(undefined, { style: 'decimal', minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById("service-total").text = newValue;
        } else {
            var professionalFee = document.getElementById("professional-fee-id").value;
            var currentTotal = document.getElementById("total-price-id").value;
            var newValue = +currentTotal - +checkbox.value;
            document.getElementById("total-price-id").text = newValue;
            document.getElementById("total-price-id").value = newValue.toLocaleString(undefined, { style: 'decimal', minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById("service-total").text = newValue;
        }
    }
</script>

@using (Html.BeginForm())
{
    <h4>@Html.ActionLink("< Back", "ViewSchedules")</h4>
    <br />
    <br />
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="Create" style="padding-top:30px;">
            <table>
                <tr class="head">
                    <th style="text-align:left!important">
                        Date and Time
                    </th>
                </tr>
                <tr class="body">
                    <td style="text-align:left!important">
                        @Model.ScheduleModel.Date.ToString("MM/dd/yyyy hh:mm tt")
                    </td>
                </tr>
            </table>
            <table>
                <tr class="head">
                    <th>
                        @Html.LabelFor(model => model.PetModel.PetName)
                    </th>
                    <th>
                        @Html.LabelFor(model => model.PetModel.Breed)
                    </th>
                    <th>
                        @Html.LabelFor(model => model.PetModel.Sex)
                    </th>
                    <th>
                        @Html.LabelFor(model => model.PetModel.Color)
                    </th>
                    <th>
                        @Html.LabelFor(model => model.PetModel.PetChipNo)
                    </th>
                    <th>
                        @Html.LabelFor(model => model.PetModel.Guardian)
                    </th>
                </tr>
                <tr class="body">
                    <td>
                        @Model.PetModel.PetName
                    </td>
                    <td>
                        @Model.PetModel.Breed
                    </td>
                    <td>
                        @Model.PetModel.Sex
                    </td>
                    <td>
                        @Model.PetModel.Color
                    </td>
                    <td>
                        @Model.PetModel.PetChipNo
                    </td>
                    <td>
                        @Model.PetModel.Guardian
                    </td>
                </tr>
            </table>
            <br />
            <div class="col-lg-6">
                <div class="form-group">
                    <span class="control-label" style="font-weight: 700; float: left">Service</span>
                    <div class="col-md-10" style="text-align:left">
                        @foreach (var item in Model.ServiceTypeModels)
                        {
                            <input type="checkbox" id="service-total" onchange="AddServiceFee(this)" value="@item.Price" /> @item.ServiceName<span>:&nbsp; ₱</span>@item.Price.ToString("#,##0.00")
                            <input type="hidden" value="@item.ServiceTypeID" />
                            <br />
                        }
                    </div>
                </div>
                <div class="form-group">
                    <span class="control-label" style="font-weight:700; float:left">Professional Fee</span>
                    <div class="col-md-12">
                        <div class="col-md-1" style="font-size: large; padding-top: 3px;">₱</div>
                        <div class="col-md-10" style="padding-left:1%">
                            @Html.EditorFor(model => model.ProfessionalFee, new { htmlAttributes = new { @id = "professional-fee-id", @class = "form-control", @onchange = "AddProfessionalFee(this.value)" } })
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <span class="control-label" style="font-weight: 700; float: left">Total Price</span>
                    <div class="col-md-12">
                        <div class="col-md-1" style="font-size: large; padding-top: 3px;">₱</div>
                        <div class="col-md-10" style="padding-left:1%">
                            @Html.EditorFor(model => model.TotalPrice, new { htmlAttributes = new { @id = "total-price-id", @class = "form-control", @disabled = "disabled" } })
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">

                <div class="form-group">
                    @Html.LabelFor(model => model.Diagnosis, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10" style="padding-left:1%">
                        @Html.TextAreaFor(model => model.Diagnosis, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                </div>
            </div>


            @Html.HiddenFor(model => model.SelectedPetID, new { id = "SelectedPetID", Value = Model.PetModel.PetID })
            @Html.HiddenFor(model => model.MyAppointmentID, new { id = "MyAppointmentID", Value = Model.MyAppointmentID })
            @Html.HiddenFor(model => model.SelectedScheduleID, new { id = "ScheduleID", Value = Model.ScheduleModel.ScheduleID })
            <div class="form-group">
                <div class="col-md-offset-1 col-md-10" style="margin-top:40px">
                    <input type="submit" value="Complete" class="btn btn-default" />
                </div>
            </div>
        </div>
    </div>}